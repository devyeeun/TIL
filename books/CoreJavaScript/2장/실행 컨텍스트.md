# 코어자바스크립트(위키북스)


## 2장 - 실행 컨텍스트
실행 컨텍스트는 **실행할 코드에 제공할 환경 정보들을 모아놓은 객체**로, 자바스크립트 코드가 실행되는 환경을 의미한다.  
자바스크립트의 동작 언어로서의 성격을 가장 잘 파악할 수 있는 개념.

### 스택과 큐
> - 스택 : 출입구가 하나뿐인 깊은 우물같은 데이터구조 LIFO 
> - 큐 : 양쪽이 모두 열려있는 파이프 같은 구조 FIFO


1. 스택 :   
스택에 순서대로 데이터 a, b, c, d를 저장했다면, 꺼낼때는 반대로 d, c, b, a 순서로 꺼낸다. 스택이 넘치면 에러를 던진다.

2. 큐 :   
양쪽 모두 입, 출력이 가능한 큐도 있지만 보통은 한쪽은 입력만, 다른 한쪽은 출력만을 담당한다. 순서대로 데이터 a, b, c, d를 저장했다면, 꺼낼때도 a, b, c, d 순서로 꺼낸다.

<br/>

### 실행 컨텍스트

하나의 실행 컨텍스트를 구성할 수 있는 방법으로 크게 3가지가 있다.
> 1. 전역 코드
> 2. 함수 코드
> 3. eval 함수

<br/>

전역 컨텍스트라는 개념은 **코드가 실행되기 전에 생성되는 컨텍스트**로, 전역 컨텍스트는 하나만 존재한다.  
최상단의 공간은 코드 내부에서 별도의 실행 명령이 없어도 브라우저에서 자동으로 실행하므로 자바스크립트 파일이 열리는 순간 전역 컨텍스트가 활성화 된다.

한 실행 컨텍스트가 콜 스택의 맨 위에 쌓이는 순간이 곧 현재 실행할 코드에 관여하게 되는 시점.

<br/>

실행컨텍스트는 ***VariableEnvironment***, ***LexicalEnvironment***, ***ThisBinding*** 이라는 3가지 객체를 가지고 있다.

### VariableEnvironment
실행 컨텍스트가 생성될 때 현재 컨텍스트 내의 식별자들에 대한 정보를 담는 객체.  
LexicalEnvironment와 담기는 내용은 같지만, LexicalEnvironment는 함수 실행 도중에 변경되는 사항이 즉시 반영되는 반면, VariableEnvironment는 초기 상태를 유지한다.

실행 컨텍스트를 생성할 때, VariableEnvironment에 정보를 먼저 담은 다음, 이를 그대로 복사해서 LexicalEnvironment를 만들고, 이후에는 LexicalEnvironment를 주로 활용한다.

VariableEnvironment와 LexicalEnvironment의 내부는 environmentRecord와 outereEnvironmentReference로 구성되어 있다.
<br/><br/>


### LexicalEnvironment
실제로 식별자와 바인딩된 값을 관리하는 객체
'현재 컨텍스트의 내부에는 어떤 식별자들이 있고, 그 외부 정보는 00을 참조하도록 구성되어있다.' 라는 느낌으로 모아놓은 것이다.


#### environmentRecord와 호이스팅
environmentRecordㅇ에는 현재 컨텍스트와 관련된 코드의 식별자 정보들이 저장된다.  
컨텍스트를 구성하는 함수에 지정된 매개변수 식별자, 선언한 함수가 있을 경우 그 함수 자체, var로 선언된 변수의 식별자 등이 식별자에 해당한다.  
컨텍스트 낸부 전체를 처음부터 끝까지 쭉 훑어나가며 **순서대로** 수집한다.

