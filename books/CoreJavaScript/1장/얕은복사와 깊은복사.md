# 코어자바스크립트(위키북스)


## 1장 - 데이터 타입

### 얕은복사와 깊은복사

1) 얕은복사 : 바로 아래 단계의 값만 복사하는 방법
2) 깊은복사 : 내부의 모든 값들을 하나하나 전부 복사하는 방법

```javascript
// 중첩된 객체에 대한 얕은 복사

let user = {
    name: 'Yeni',
    info: {
        age : 30,
        gender : 'female',
        address : 'Seoul'
    }
}

let copyobject = (user) => {
    let result = {};
    for (let prop in user){
        result[prop] = user[prop];
    }
    return result;
}

let user2 = copyobject(user);
user2.name = 'Kim';
console.log(user.name === user2.name);   // false

user.info.age = 35;
console.log(user.info.age === user2.info.age);  // true
console.log(user.info.age);  // 35

user2.info.address = 'Kyonggi';
console.log(user.info.address === user2.info.address);   // true
console.log(user.info.address);  // Kyonggi
```

> user 객체에 직접 속한 프로퍼티에 대해서는 복사해서 완전히 새로운 데이터가 만들어진 반면, 한 단계 더 들어간 info의 내부프로퍼티들은 기존 데이터를 그대로 참조 => user.info 프로퍼티에 대해서도 불변 객체로 만들어야함. 


```javascript
// 중첩된 객체에 대한 깊은 복사
let user2 = copyobject(user);
user2.info = copyobject(user.info);
user.info.age = 35;
console.log(user.info.age === user2.info.age);  // false
console.log(user.info.age);   // 35
console.log(user2.info.age);  // 30

user2.info.address = 'Kyonggi';
console.log(user.info.address === user2.info.address);   // false
console.log(user.info.address);   // Seoul
console.log(user2.info.address);  // Kyonggi
```

> 어떤 객체를 복사할 때, 객체 내부의 모든 값을 복사해서 완전히 새로운 데이터를 만들고자 할 때, 객체의 프로퍼티 중에서 그 값이 기본형 데이터일 경우에는 그대로 복사하면 되지만 **참조형 데이터는 다시 그 내부의 프로퍼티들을 복사**해야한다.   
참조형 데이터가 있을 때마다 재귀적으로 수행해야만 비로소 깊은 복사가 되는 것!

<br/>
<br/>

```javascript
// 깊은 복사가 가능하도록 함수 수정
let copyobjectDeepCopy = (user) => {
    let result = {};
    if(typeof user === Object && user !== null){
        for (let prop in user){
            result[prop] = copyobjectDeepCopy(user[prop]);
        }
    } else {
        result = user;
    }
    return result;
}
```

